// node_modules/kkiapay/dist/k.es.js
var e;
!function(e2) {
  e2.NETWORK_STATE_CHANGED = "NETWORK_STATE_CHANGED", e2.INIT_WIDGET = "INIT_WIDGET", e2.WIDGET_SUCCESSFULLY_INIT = "WIDGET_SUCCESSFULLY_INIT", e2.CLOSE_WIDGET = "CLOSE_WIDGET", e2.DESTROY_WIDGET = "DESTROY_WIDGET", e2.WIDGET_SUCCESSFULLY_DESTROYED = "WIDGET_SUCCESSFULLY_DESTROYED", e2.PAYMENT_INIT = "PAYMENT_INIT", e2.PAYMENT_ABORTED = "PAYMENT_ABORTED", e2.PENDING_PAYMENT = "PENDING_PAYMENT", e2.ON_USER_FEEDBACK = "ON_USER_FEEDBACK", e2.PAYMENT_FAILED = "PAYMENT_FAILED", e2.PAYMENT_SUCCESS = "PAYMENT_SUCCESS", e2.PAYMENT_END = "PAYMENT_END", e2.RETRY_PAYMENT = "RETRY_PAYMENT";
}(e || (e = {}));
var t = { serviceId: "INTEGRATION" };
var n = { UI_APP_DEV: "https://widget-v3.kkiapay.me", UI_APP_CDN_LINK: "https://cdn.kkiapay.me/k.js" };
var i = ["amount", "sandbox", "position", "theme", "paymentmethod", "paymentMethods", "providers", "fullname", "name", "email", "phoneNumber", "phone", "data", "key", "sdk", "url", "callback", "buttontext", "direct", "split", "partnerid", "partnerId", "successCallback", "apikey", "api_key", "publicAPIKey", "countries"];
var a = { phone: "phoneNumber", name: "fullname", paymentmethod: "paymentMethods", apikey: "key", successCallback: "callback", publicAPIKey: "key", api_key: "key", partnerid: "partnerId" };
var d = ["countries", "paymentMethods"];
function o(e2) {
  const t2 = e2.split("-");
  return t2[0] + t2.slice(1).map((e3) => e3.charAt(0).toUpperCase() + e3.slice(1)).join("");
}
function r(e2) {
  const t2 = JSON.parse(JSON.stringify(e2));
  if ("" === t2)
    return t2;
  if (Number.isNaN(Number(t2))) {
    if ("false" === t2)
      return false;
    if ("true" === t2)
      return true;
    if (t2.indexOf(",") > -1) {
      return t2.split(" ").join("").split(",");
    }
    return t2;
  }
  return Number(t2);
}
var s = class extends HTMLElement {
  constructor() {
    super();
    const e2 = this.attachShadow({ mode: "open" });
    let t2, n2 = document.createElement("button");
    n2.innerHTML = "en" === window.navigator.language.split("-")[0] ? "Pay now" : "Payer maintenant", n2.setAttribute("style", "\n        background-color: #4661b9;\n        color: white;\n        padding: 10px 20px;\n        font-size: 16px;\n        border: none;\n        border-radius: 5px;\n        cursor: pointer;\n      "), e2.appendChild(n2), setTimeout(() => {
      t2 = Object.freeze({ ...this });
    }, 100), n2.addEventListener("click", () => {
      window.openKkiapayWidget(t2);
    });
  }
  static get observedAttributes() {
    return i;
  }
  attributeChangedCallback(e2, t2, n2) {
    if (null !== t2)
      return;
    const i2 = this;
    if (i2[o(e2)] = n2, this.shadowRoot && e2 === o("buttontext") && n2) {
      const e3 = this.shadowRoot.querySelector("button");
      e3 && (e3.innerHTML = i2[o("buttontext")]);
    }
  }
};
var E;
var c = () => {
};
var T = (() => {
  const t2 = {};
  for (const n2 in e)
    t2[n2] = () => {
    };
  return t2;
})();
var u = (i2) => {
  i2 = function(e2) {
    const t2 = { ...e2 };
    for (let e3 in a)
      t2[e3] && (t2[a[e3]] = t2[e3], delete t2[e3]);
    for (let e3 in t2) {
      if (["data", "paymentMethods", "countries"].includes(e3)) {
        try {
          t2[e3] = JSON.parse(JSON.stringify(t2[e3]));
        } catch (e4) {
        }
        d.includes(e3) && (t2[e3] = Array.isArray(r(t2[e3])) ? r(t2[e3]) : [r(t2[e3])], "paymentMethods" === e3) && t2.paymentMethods.find((e4) => !["momo", "card", "direct_debit"].includes(e4)) && (t2.paymentMethods = ["momo", "card", "direct_debit"]);
      }
      "amount" === e3 && (t2[e3] = Number(t2[e3])), "phoneNumber" === e3 && (t2[e3] = String(t2[e3])), "sandbox" === e3 && "boolean" != typeof t2.sandbox && ("true" === t2.sandbox ? t2.sandbox = true : (t2.sandbox, t2.sandbox = false)), "position" !== e3 || ["left", "right", "center"].includes(t2[e3]) || (t2[e3] = "center");
    }
    return t2;
  }(i2);
  const o2 = E.contentWindow;
  o2 && o2.postMessage({ name: e.INIT_WIDGET, data: { ...i2, host: window.location.href, ...t } }, n.UI_APP_DEV);
};
(() => {
  const e2 = (/* @__PURE__ */ new Date()).getTime();
  E = document.createElement("iframe"), E.style.cssText = `
    display: block;
    height: 100svh; 
    width: 100%; 
    position: fixed;
    top: 0;
    left: 0;
    z-index: ${e2};`, E.src = n.UI_APP_DEV, E.setAttribute("frameborder", "0"), E.addEventListener("load", () => c());
})(), window.addEventListener("load", () => (() => {
  const e2 = document.querySelector(".kkiapay-button"), t2 = document.querySelector(`script[src="${n.UI_APP_CDN_LINK}"]`);
  if (t2 && e2) {
    let n2 = {};
    for (let e3 of i) {
      const i2 = t2.getAttribute(e3);
      i2 && (n2[e3] = i2);
    }
    e2.addEventListener("click", () => {
      p(n2);
    });
  }
})()), window.addEventListener("message", (t2) => {
  t2.data && T[t2.data.name] && (T[t2.data.name](t2.data.data), t2.data.name === e.CLOSE_WIDGET && N());
});
var p = (e2) => {
  c = () => u(e2), document.body.appendChild(E);
};
var N = () => E.remove();
var _ = (e2) => {
  T.INIT_WIDGET = e2;
};
var l = (e2) => {
  T.CLOSE_WIDGET = e2;
};
var m = (e2) => {
  T.DESTROY_WIDGET = e2;
};
var w = (e2) => {
  T.PAYMENT_INIT = e2;
};
var A = (e2) => {
  T.PAYMENT_ABORTED = e2;
};
var I = (e2) => {
  T.ON_USER_FEEDBACK = e2;
};
var S = (e2) => {
  T.PENDING_PAYMENT = e2;
};
var y = (e2) => {
  T.PAYMENT_FAILED = e2;
};
var D = (e2) => {
  T.PAYMENT_SUCCESS = e2;
};
var b = (e2) => {
  T.PAYMENT_END = e2;
};
var P = (e2) => {
  T.NETWORK_STATE_CHANGED = e2;
};
var L = (e2, t2) => {
  "success" === e2 ? T.PAYMENT_SUCCESS = t2 : "failed" === e2 && (T.PAYMENT_FAILED = t2);
};
var h = (e2) => {
  "success" === e2 ? T.PAYMENT_SUCCESS = () => {
  } : "failed" === e2 && (T.PAYMENT_FAILED = () => {
  });
};
window.openKkiapayWidget = p, window.closeKkiapayWidget = N, window.addWidgetInitListener = _, window.addKkiapayCloseListener = l, window.addWidgetDestroyedListener = m, window.addPaymentInitListener = w, window.addPaymentEndListener = b, window.addPaymentAbortedListener = A, window.addFeedbackListener = I, window.addPendingListener = S, window.addFailedListener = y, window.addSuccessListener = D, window.onNetworkStateChanged = P, window.addEventListener = addEventListener, window.addKkiapayListener = L, window.removeKkiapayListener = h, window.customElements.get("kkiapay-widget") || window.customElements.define("kkiapay-widget", s);
export {
  y as addFailedListener,
  I as addFeedbackListener,
  l as addKkiapayCloseListener,
  L as addKkiapayListener,
  A as addPaymentAbortedListener,
  b as addPaymentEndListener,
  w as addPaymentInitListener,
  S as addPendingListener,
  D as addSuccessListener,
  m as addWidgetDestroyedListener,
  _ as addWidgetInitListener,
  N as closeKkiapayWidget,
  P as onNetworkStateChanged,
  p as openKkiapayWidget,
  h as removeKkiapayListener
};
//# sourceMappingURL=kkiapay.js.map
